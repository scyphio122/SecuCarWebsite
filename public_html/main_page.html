<!DOCTYPE html>
<html lang="pl">
	<head>
		<title>SecuCar</title>
		<!-- Include stylesheet -->
		<link rel="stylesheet" href="styles.css">
		<link rel="stylesheet" href="styles/newDeviceModal.css">
		<link rel="stylesheet" href="styles/form_style.css">
		<link rel="stylesheet" href="styles/modal_style.css">
		<link rel="stylesheet" href="styles/table_style.css">
		<link rel="stylesheet" href="styles/map_style.css">
		<link href="https://fonts.googleapis.com/css?family=Rambla" rel="stylesheet">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script stc="3rd_party/infobox.js"
		<script src="jquery-3.2.1.js"></script>
		<script src="login.js"></script>
		<script src="mainPage.js"></script>
		<script src="map.js"></script>
		<script src="httpRequests.js"></script>
		<script src="database_requests.js"></script>

	</head>

	<body>
		<div id="mainPage" class="mainPage">
			<div id="userDiv">

			</div>

			<div id="dataDiv">
				<div id="mainPageLeftPanel">
					<div id="tableDiv" style="width: 100%; height: 88%;">
							<table id="devicesTable">
							<caption id="selectDeviceLabel" class="tableCaption">Select the device:</caption>
								<tr id="headerTr">
										<th>Device number</th>
										<th>Device Name</th>
										<th>Last known location</th>
										<th>Serial Number</th>
										<th>Firmware Version</th>
								</tr>
							</table>

							<script type="text/javascript">
								$('select').on('change', function() {
									console.log("Select changed");
									var idDevice = devicesList[$("#devicesSelect")[0].selectedIndex]["idDevice"];
									getTrackList(idDevice);
								})
							</script>
					</div>

					<div id="addNewDeviceDiv" style="postion: absolute; botton: 12%;">
						<input id="addDeviceButton" type="image" value="AddDevice" src="Icons/add2.png" style="width: 10%; height: 10%; margin-left: 85%;">
					</div>
				</div>

				<div id="verticalLineDiv">
						<hr class="verticalLine">
				</div>

				<div id="mainPageRightPanel">
					<table id="trackTable" style="width:90%;">
					<caption class="tableCaption">Select the track:</caption>
						<tr id="headerTr">
							<th>Track number</th>
							<th>Track start date</th>
							<th>Track start coordinates</th>
							<th>Track end date</th>
							<th>Track end coordinates</th>
							<th>Track length [km]</th>
							<th>Driving assessment</th>
						</tr>
					</table>
				</div>
			</div>
		</div>

		<div id="modal_map" class="modal">

			<div id="modal_map_content" class="modal-content">
				<span class="close">&times;</span>
				<center><h2 id="modalTrackId" class="modal_title">Track number: </h2></center>
				<div id="map" class="map"></div>
				<div id="mapModalRightPanel">
						<table id="sampleTable" style="margin-top:1%; width:90%;">
								<caption class="tableCaption">Samples:</caption>
								<tr id="headerTr">
									<th>Number</th>
									<th>Time</th>
									<th>Coordinates</th>
									<th>Speed [km/h]</th>
									<th>Acceleration [m/s^2]</th>
									<th>Azimuth</th>
								</tr>
						</table>
				</div>
			</div>
		</div>

		<div id="modal_add_device" class="modal">
				<span id="addDeviceCloseButton" class="close">&times;</span>
				<center><h2 id="addDeviceLabel" class="modal_title">Add Device</h2></center>
				<div id="newDeviceFormDiv" class="formDiv">
					<form id="addNewDeviceForm">
							<div class="lineDiv"><label class="formTextLabel">Device Name</label></div>
							<div class="lineDiv"><input id="deviceNameInput" class="formTextInput" type="text" placeholder="Enter Device Name (optional)" name="devName" ></div>

							<div class="lineDiv"><label class="formTextLabel">Serial Number</label></div>
							<div class="lineDiv"><input id="deviceSerialNumberInput" class="formTextInput" type="text" placeholder="Enter Serial Number" name="serialNumber" required></div>

						<div class="lineDiv"><button id="newDeviceSubmitButton" class="submitButton" type="submit">Submit</button></div>
						<div class="lineDiv"><button id="cancelDeviceRegistrationButton" class="cancelButton" type="button" class="cancelbtn">Cancel</button></div>
					</form>
				</div>
		</div>
		<script>
			$( "#addNewDeviceForm" ).submit(function( event )
			{
				// Stop form from submitting normally
				event.preventDefault();
				// Get some values from elements on the page:
				var $form = $( this ),
					_deviceName = $form.find( "input[name='devName']" ).val(),
					_serialNumber = $form.find( "input[name='serialNumber']" ).val();

				addNewDevice(_deviceName, _serialNumber);
			});
		</script>

		<script src="map.js"></script>
		<script src="map_modal.js"></script>
		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5a82h77p6Z165CDKzdOUOogmghrM2jjE&callback=initializeMap">
		</script>

	</body>
</html>
